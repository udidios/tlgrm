<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width="100%", height="55%", initial-scale=1.0">
    <title>udid</title>
</head>
<body>
<div class="container">
    <main>

        <div class="player">
            <div class="kinobox_player"></div>
        </div>
        <form hidden method="get">
            <input name="q" class="search__input hidden" aria-label="search" placeholder="Поиск фильма">
        </form>


        <div class="placeholder hidden">
            <div class="placeholder__title hidden"></div>
            <ul class="placeholder__list hidden">
            </ul>
        </div>

    </main>
</div>
<script src="https://kinobox.tv/kinobox.min.js"></script>
	<script>
    
    const input = document.querySelector('input[name="q"]');

    function getQuery() {
        const params = new URLSearchParams(location.search);
        if (params.has('q')) {
            const value = params.get('q').trim();
            if (value.includes('kinopoisk.ru') || value.includes('imdb.com')) {
                const match = value.match(/\/(?:film|series|title)\/(?<id>(tt)*\d+)/);
                return match.groups.id;
            }
            return decodeURI(value);
        }
        return '';
    }

    function updateView() {
        const placeholder = document.querySelector('.placeholder');
        const player = document.querySelector('.player');
        if (getQuery() === '') {
            placeholder.classList.remove('hidden');
            player.classList.add('hidden');
        } else {
            placeholder.classList.add('hidden');
            player.classList.remove('hidden');
            initPlayer();
        }
    }

    function initPlayer() {
        new Kinobox('.kinobox_player', {
        search: {
		query: getQuery()
        },
        'players':{'Collaps':{'enable':true,'position':1,'token':'0c54da2301073eafd15dcefc417e20e3'},'Bazon':{'enable':true,'position':2,'token':'fd96dcfe0417aa1f2d99b595658afbf4'},'Hdvb':{'enable':true,'position':3,'token':'8a22f8e7684404c3815e3ffa940f00a0'},'Videocdn':{'enable':true,'position':4,'token':'NQTJzau1aumGng3v6Mx4IDjQI6IdrOo1'},'Alloha':{'enable':true,'position':5,'token':'{token}'},'Kodik':{'enable':true,'position':6,'token':'{token}'}},
    }).init();
    }

    input.value = getQuery();
    updateView();
</script>
	
	
<script> 
 document.oncontextmenu = function() { 
 return false; 
 }; 
 document.onkeydown = function(e) { 
 if (e.keyCode == 123) { 
 return false; 
 } 
 if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { 
 return false; 
 } 
 if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) { 
 return false; 
 } 
 if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { 
 return false; 
 } 

 if (e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) { 
 return false; 
 } 
 } 
</script>
</body>
</html>
